name: pr
run-name: ${{ github.event_name=='workflow_dispatch' && format('Manually build feature branch {0}', github.event.inputs.pull_request_id) || '' }}
on:
  pull_request:
  workflow_dispatch:
    inputs:
      pull_request_id:
        description: The pull request id that you want to test
        required: true
        type: string

jobs:
  pr_commented:
    # This job only runs for pull request comments
    name: PR comment
    runs-on: ubuntu-latest
    env:
      TEXT: ${{ github.event.inputs.pull_request_id || 'default'}}-test
    steps:
      - name: report
        if: github.event_name == 'pull_request'
        uses: actions/github-script@v6
        with:
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: 'ðŸ‘‹ Thanks for reporting! will run ${{env.TEXT}}'
            })
# on:
#   # pull_request:
#   issue_comment:
# jobs:
#   pr_commented:
#     # if: ${{ github.event.issue.pull_request }}
#     runs-on: [ubuntu-latest]
#     steps:
#       - name: debug
#         run: |
#           echo hello world
#         env:
#           EVENT: ${{ github.event.issue }}
#       - name: say hello
#         if: contains(github.event.comment.body, '/support')   # check the comment if it contains the keywords
#         run: |
#           echo say hello
